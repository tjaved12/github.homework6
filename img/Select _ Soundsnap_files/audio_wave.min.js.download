if("undefined"!=typeof wavesurfer){var loaded=[],ua=navigator.userAgent.toLowerCase(),msie=ua.indexOf("trident"),msedge=ua.indexOf("edge"),safari=ua.indexOf("safari"),chrome=ua.indexOf("chrome"),seconds=[],promised_data=[],playbar=function(e,a){"use strict";0===a?jQuery(".jp-play-bar").width(e+"%"):jQuery(".jp-play-bar").stop().animate({width:e+"%"},a,"linear")};function loadingWave(e,a){"use strict";"loading"===a?(jQuery(".wave-loader:eq("+e+")").html("loading"),jQuery(".wave > wave:eq("+e+")").css({opacity:.2})):(jQuery(".wave-loader:eq("+e+")").empty(),jQuery(".wave > wave:eq("+e+")").css({opacity:1}))}function playbarProcess(e,a){"use strict";0<e&&(playbar(100*(e/a),80),jQuery(".jp-current-time").html(convertTime(e)))}function convertTime(e){"use strict";e=e&&"number"==typeof e?e:0;var a=new Date(1e3*e),r=a.getUTCHours(),o=a.getUTCMinutes()+60*r,u=a.getUTCSeconds(),t="";return t+=(o<10?"0"+o:o)+":",t+=(u<10?"0"+u:u)+""}function getPeaks(e){return $j.ajax({url:e,type:"get",dataType:"JSON"}).promise()}function changeVolume(a){"use strict";jQuery.each(wavesurfer,function(e){wavesurfer[e].setVolume(a)})}"true"==readCookie("ss_autoplay")&&(jQuery(".jp-autoplay").addClass("on"),jQuery(".jp-autoplay").attr("title","disable autoplay")),jQuery(".jp-autoplay").click(function(){jQuery(this).toggleClass("on"),jQuery(this).hasClass("on")?(createCookie("ss_autoplay","true",7),jQuery(this).attr("title","disable autoplay")):(createCookie("ss_autoplay","false",7),jQuery(this).attr("title","enable autoplay"))});var volume="0.8";function load_media(a){if(void 0!==wavesurfer[a]&&void 0!==wavesurfer[a].backend.song){var e=wavesurfer[a].backend.peaks;e.includes("http")?(promised_data[a]=getPeaks(e),promised_data[a].done(function(e){wavesurfer[a].backend.peaks=e,wavesurfer[a].load(wavesurfer[a].backend.song,wavesurfer[a].backend.peaks,"auto")})):wavesurfer[a].load(wavesurfer[a].backend.song,wavesurfer[a].backend.peaks,"auto"),loaded[a]=!0}else loadingWave(a,"loading")}readCookie("ss_volume")&&(volume=readCookie("ss_volume")),createCookie("ss_volume",volume,7),jQuery(".jp-pause").hide(),jQuery(".jp-volume-bar-value").width(100*volume+"%"),jQuery(".jp-volume-bar").on("click",function(e){var a=jQuery(this).offset(),r=(e.pageX-a.left)/jQuery(this).width(),o=Math.ceil(10*r)/10;jQuery(".jp-volume-bar-value").width(100*o+"%"),jQuery(".jp-unmute").hide(),jQuery(".jp-mute").show(),createCookie("ss_volume",o,7),changeVolume(o)}),jQuery(".jp-seek-bar").on("click",function(e){var a=jQuery(this).offset(),r=(e.pageX-a.left)/jQuery(this).width(),o=0;jQuery.each(jQuery(".ojoo-button"),function(e){jQuery(this).hasClass("active")&&(o=e)}),0<wavesurfer[o].getCurrentTime()&&(playbar(100*r,0),wavesurfer[o].seekTo(r))}),0<volume?jQuery(".jp-unmute").hide():jQuery(".jp-mute").hide(),jQuery(".jp-mute").on("click",function(){jQuery(".jp-unmute").show(),jQuery(".jp-mute").hide(),changeVolume(0),jQuery(".jp-volume-bar-value").width("0%")}),jQuery(".jp-unmute").on("click",function(){jQuery(".jp-unmute").hide(),jQuery(".jp-mute").show(),changeVolume(volume),jQuery(".jp-volume-bar-value").width(100*volume+"%")}),jQuery(".jp-play").on("click",function(){var a=0;jQuery.each(jQuery(".ojoo-button"),function(e){jQuery(this).hasClass("active")&&(a=e)}),jQuery(".ojoo-button:eq("+a+")").trigger("click")}),jQuery(".jp-pause").on("click",function(){jQuery(".ojoo-button.active").trigger("click")}),jQuery(".jp-next").on("click",function(){var a=1;jQuery.each(jQuery(".ojoo-button"),function(e){jQuery(this).hasClass("active")&&(a=e+1)}),jQuery(".ojoo-button:eq("+a+")").trigger("click")}),jQuery(".jp-previous").on("click",function(){var a=0;jQuery.each(jQuery(".ojoo-button"),function(e){jQuery(this).hasClass("active")&&(a=e-1)}),0<=a&&jQuery(".ojoo-button:eq("+a+")").trigger("click")}),jQuery.each(wavesurfer,function(r){var e,a=r+1;jQuery("audio:eq("+r+")"),wavesurfer[r].params.backend;(wavesurfer[r].setVolume(volume),null==(e=wavesurfer[r].backend.peaks)||0<safari&&chrome<0)?load_media(r):(e=wavesurfer[r].backend.peaks).includes("http")?(promised_data[r]=getPeaks(e),promised_data[r].done(function(e){wavesurfer[r].backend.peaks=e,wavesurfer[r].drawBuffer(),wavesurfer[r].createPeakCache()})):(wavesurfer[r].drawBuffer(),wavesurfer[r].createPeakCache());wavesurfer[r].on("waveform-ready",function(){loadingWave(r,"stop"),loaded[r]=!0}),wavesurfer[r].on("ready",function(){wavesurfer[r].setVolume(volume),loadingWave(r,"stop"),loaded[r]||(loaded[r]=!0)}),wavesurfer[r].on("seek",function(){var e=wavesurfer[r].getDuration();playbarProcess(wavesurfer[r].getCurrentTime(),e)}),wavesurfer[r].on("play",function(){if(jQuery(".ojoo-button:eq("+r+")").hasClass("active")){var e=wavesurfer[r].getDuration();jQuery(".jp-progress").addClass("jp-active"),jQuery(".jp-duration").html(convertTime(e)),jQuery(".ojoo-audio-box:not(:eq("+r+")).active").removeClass("active"),jQuery(".ojoo-audio-box:eq("+r+")").addClass("active")}else wavesurfer[r].stop();jQuery(".jp-seek-bar").show(),(!0===loaded[r]||0<msie)&&loadingWave(r,"stop")}),wavesurfer[r].on("audioprocess",function(){var e=wavesurfer[r].getDuration(),a=wavesurfer[r].getCurrentTime();playbarProcess(a,e),0<a&&(loadingWave(r,"stop"),loaded[r]=!0)}),wavesurfer[r].on("finish",function(){playbar(0,1),jQuery(".jp-progress").removeClass("jp-active"),jQuery(".jp-duration").empty(),jQuery(".jp-current-time").empty(),jQuery(".jp-play").show(),jQuery(".jp-pause").hide(),wavesurfer[r].stop(),wavesurfer[r].toggleInteraction(),jQuery(".ojoo-button").removeClass("ojoo-pause"),jQuery(".ojoo-audio-box:eq("+r+")").removeClass("active"),jQuery(".jp-title-content").empty(),wavesurfer[a]&&(jQuery(".jp-autoplay").hasClass("on")&&jQuery(".ojoo-button:eq("+a+")").trigger("click"),jQuery(".ojoo-button:eq("+a+")").addClass("active"))}),wavesurfer[r].on("error",function(){wavesurfer[r].destroy(),jQuery(".ojoo-audio:eq("+r+")").addClass("ojoo-error"),jQuery(".ojoo-button:eq("+r+")").off().removeClass("ojoo-play"),jQuery(".wave:eq("+r+")").html("There was an error loading the file")}),jQuery(window).resize(function(){wavesurfer[r].empty(),wavesurfer[r].drawBuffer()})}),jQuery("body").keydown(function(e){jQuery("#edit-keys-ojoo").is(":focus")||(37==e.keyCode?jQuery(".jp-previous").trigger("click"):39==e.keyCode&&jQuery(".jp-next").trigger("click"))}),jQuery(".ojoo-button").on("mouseover",function(){var e=jQuery(".ojoo-button").index(this);loaded[e]||load_media(e)}),jQuery(".jp-next").on("mouseover",function(){var a=1;jQuery.each(jQuery(".ojoo-button"),function(e){jQuery(this).hasClass("active")&&(a=e+1)}),loaded[a]||load_media(a)}),jQuery(".jp-previous").on("mouseover",function(){var a=0;jQuery.each(jQuery(".ojoo-button"),function(e){jQuery(this).hasClass("active")&&(a=e-1)}),0<=a&&(loaded[a]||load_media(a))}),jQuery(".ojoo-button").on("click",function(){var e=jQuery(this);e.hasClass("active")||(playbar(0,0),e.addClass("active"));var a=jQuery(".ojoo-button").index(this);jQuery.each(jQuery(".ojoo-button"),function(e){e!==a||wavesurfer[e].params.interact||wavesurfer[e].toggleInteraction(),e!==a&&((jQuery(this).hasClass("active")||jQuery(this).hasClass("ojoo-pause")||wavesurfer[e].params.interact)&&(wavesurfer[e].stop(),loadingWave(e,"stop")),jQuery(this).hasClass("ojoo-pause")&&jQuery(this).removeClass("ojoo-pause"),wavesurfer[e].params.interact&&wavesurfer[e].toggleInteraction(),jQuery(this).removeClass("active"))}),e.hasClass("ojoo-pause")?(e.removeClass("ojoo-pause"),wavesurfer[a].pause(),jQuery(".jp-play").show(),jQuery(".jp-pause").hide()):(e.addClass("ojoo-pause"),jQuery(".jp-play").hide(),jQuery(".jp-pause").show(),jQuery(".jp-seek-bar").hide(),loaded[a]||load_media(a),wavesurfer[a].play())}),jQuery(".jp-controls a").on("touchstart",function(){jQuery(this).removeClass("touch-out").addClass("touch-in")}),jQuery(".jp-controls a").on("touchend",function(){jQuery(this).removeClass("touch-in").addClass("touch-out")})}function startTimer(e,a){return a&&(seconds[e]=0,clearInterval(timer)),timer=setInterval(function(){seconds[e]++},1),seconds[e]}